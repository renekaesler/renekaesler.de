(()=>{var cr=Object.defineProperty;var We=Object.getOwnPropertySymbols;var ur=Object.prototype.hasOwnProperty,fr=Object.prototype.propertyIsEnumerable;var Ge=(e,t,r)=>t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ye=(e,t)=>{for(var r in t||(t={}))ur.call(t,r)&&Ge(e,r,t[r]);if(We)for(var r of We(t))fr.call(t,r)&&Ge(e,r,t[r]);return e};var mr=(e,t)=>()=>(e&&(t=e(e=0)),t);var yr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var O=(e,t,r)=>new Promise((n,o)=>{var i=s=>{try{a(r.next(s))}catch(c){o(c)}},l=s=>{try{a(r.throw(s))}catch(c){o(c)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(i,l);a((r=r.apply(e,t)).next())});function Ue(e){if(e instanceof Int8Array)return 5120;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return 5121;if(e instanceof Int16Array)return 5122;if(e instanceof Uint16Array)return 5123;if(e instanceof Int32Array)return 5124;if(e instanceof Uint32Array)return 5125;if(e instanceof Float32Array)return 5126;throw new Error("unsupported typed array type")}function mt(e){if(e===Int8Array)return 5120;if(e===Uint8Array||e===Uint8ClampedArray)return 5121;if(e===Int16Array)return 5122;if(e===Uint16Array)return 5123;if(e===Int32Array)return 5124;if(e===Uint32Array)return 5125;if(e===Float32Array)return 5126;throw new Error("unsupported typed array type")}function yt(e){let t=ft[e];if(!t)throw new Error("unknown gl type");return t}function bt(...e){console.error(...e)}function Ce(e,t){if(!e||typeof e!="object")return!1;let r=Ke.get(t);r||(r=new WeakMap,Ke.set(t,r));let n=r.get(e);if(n===void 0){let o=Object.prototype.toString.call(e);n=o.substring(8,o.length-1)===t,r.set(e,n)}return n}function dr(e,t){return typeof WebGLBuffer<"u"&&Ce(t,"WebGLBuffer")}function dt(e,t){return typeof WebGLTexture<"u"&&Ce(t,"WebGLTexture")}function pr(e,t){return typeof WebGLSampler<"u"&&Ce(t,"WebGLSampler")}function Pr(e,t,r,n,o){e.bindBuffer(t,r),e.bufferData(t,n,o||pt)}function gt(e,t,r,n){if(dr(e,t))return t;r=r||$;let o=e.createBuffer();return Pr(e,r,o,t,n),o}function vt(e){return e==="indices"}function Tr(e){return e===Int8Array||e===Uint8Array}function Sr(e){return e.length?e:e.data}function zr(e,t){let r;if(Ir.test(e)?r=2:Rr.test(e)?r=4:r=3,t%r>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function Ur(e,t,r){return e.numComponents||e.size||zr(t,r||Sr(e).length)}function Ft(e,t){if(le(e))return e;if(le(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type?ke(e.type):void 0;return r||(vt(t)?r=Uint16Array:r=Float32Array),new r(e.data)}function Cr(e){return typeof e=="number"?e:e?mt(e):ht}function ke(e){return typeof e=="number"?yt(e):e||Float32Array}function kr(e,t){return{buffer:t.buffer,numValues:2*3*4,type:Cr(t.type),arrayType:ke(t.type)}}function Mr(e,t){let r=t.data||t,n=ke(t.type),o=r*n.BYTES_PER_ELEMENT,i=e.createBuffer();return e.bindBuffer($,i),e.bufferData($,o,t.drawType||pt),{buffer:i,numValues:r,type:mt(n),arrayType:n}}function Br(e,t,r){let n=Ft(t,r);return{arrayType:n.constructor,buffer:gt(e,n,void 0,t.drawType),type:Ue(n),numValues:0}}function Dr(e,t){let r={};return Object.keys(t).forEach(function(n){if(!vt(n)){let o=t[n],i=o.attrib||o.name||o.attribName||xt.attribPrefix+n;if(o.value){if(!Array.isArray(o.value)&&!le(o.value))throw new Error("array.value is not array or typedarray");r[i]={value:o.value}}else{let l;o.buffer&&o.buffer instanceof WebGLBuffer?l=kr:typeof o=="number"||typeof o.data=="number"?l=Mr:l=Br;let{buffer:a,type:s,numValues:c,arrayType:f}=l(e,o,n),u=o.normalize!==void 0?o.normalize:Tr(f),y=Ur(o,n,c);r[i]={buffer:a,numComponents:y,type:s,normalize:u,stride:o.stride||0,offset:o.offset||0,divisor:o.divisor===void 0?void 0:o.divisor,drawType:o.drawType}}}}),e.bindBuffer($,null),r}function Lr(e,t){return t===gr||t===vr?1:t===Fr||t===Ar?2:t===Er||t===wr||t===ht?4:0}function Or(e,t){let r,n;for(n=0;n<Fe.length&&(r=Fe[n],!(r in t||(r=xt.attribPrefix+r,r in t)));++n);n===Fe.length&&(r=Object.keys(t)[0]);let o=t[r];if(!o.buffer)return 1;e.bindBuffer($,o.buffer);let i=e.getBufferParameter($,xr);e.bindBuffer($,null);let l=Lr(e,o.type),a=i/l,s=o.numComponents||o.size,c=a/s;if(c%1!==0)throw new Error(`numComponents ${s} not correct for length ${length}`);return c}function _r(e,t,r){let n=Dr(e,t),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},n);let i=t.indices;if(i){let l=Ft(i,"indices");o.indices=gt(e,l,hr),o.numElements=l.length,o.elementType=Ue(l)}else o.numElements||(o.numElements=Or(e,o.attribs));return o}function ee(e){return!!e.texStorage2D}function ye(e){if(!Ee){let t={};t[Ze]={textureFormat:Ze,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[g,S,Z,E]},t[Je]={textureFormat:Je,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[g,S,Z,E]},t[Qe]={textureFormat:Qe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[g,S,Z,E]},t[I]={textureFormat:I,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[g,S,Z,E,ot]},t[v]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[g,S,Z,E,rt,nt]},t[K]={textureFormat:K,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[_,H]},t[rn]={textureFormat:ie,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[g]},t[nn]={textureFormat:ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[U]},t[on]={textureFormat:ie,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[E,S]},t[an]={textureFormat:ie,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[E]},t[sn]={textureFormat:G,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[g]},t[ln]={textureFormat:G,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[U]},t[gn]={textureFormat:G,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[H]},t[vn]={textureFormat:G,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[re]},t[Fn]={textureFormat:G,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_]},t[An]={textureFormat:G,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ne]},t[yn]={textureFormat:oe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[g]},t[bn]={textureFormat:oe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[U]},t[dn]={textureFormat:oe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[E,S]},t[pn]={textureFormat:oe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[E]},t[hn]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[g]},t[xn]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[U]},t[cn]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[H]},t[un]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[re]},t[fn]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[_]},t[mn]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[ne]},t[En]={textureFormat:I,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[g]},t[wn]={textureFormat:I,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[g]},t[Pn]={textureFormat:I,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[g,ot]},t[Tn]={textureFormat:I,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[U]},t[Sn]={textureFormat:I,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[E,S,no]},t[In]={textureFormat:I,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[E,S,oo]},t[Rn]={textureFormat:I,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[E,S]},t[zn]={textureFormat:I,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[E]},t[Un]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[g]},t[Cn]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[U]},t[kn]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[H]},t[Mn]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[re]},t[Bn]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[_]},t[Dn]={textureFormat:Y,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[ne]},t[Ln]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[g]},t[On]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[g]},t[_n]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[U]},t[Nn]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[g,nt,Ae]},t[$n]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[g,rt]},t[Vn]={textureFormat:v,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ae]},t[jn]={textureFormat:v,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[E,S]},t[Hn]={textureFormat:v,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[E]},t[Wn]={textureFormat:N,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[g]},t[Gn]={textureFormat:N,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[U]},t[Yn]={textureFormat:N,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ae]},t[qn]={textureFormat:N,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[H]},t[Xn]={textureFormat:N,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[re]},t[Kn]={textureFormat:N,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[ne]},t[Zn]={textureFormat:N,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[_]},t[Jn]={textureFormat:K,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[H,_]},t[Qn]={textureFormat:K,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[_]},t[eo]={textureFormat:K,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[E]},t[ro]={textureFormat:et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ao]},t[to]={textureFormat:et,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[io]},Object.keys(t).forEach(function(r){let n=t[r];n.bytesPerElementMap={},n.bytesPerElement.forEach(function(o,i){let l=n.type[i];n.bytesPerElementMap[l]=o})}),Ee=t}return Ee[e]}function so(e,t){let r=ye(e);if(!r)throw"unknown internal format";let n=r.bytesPerElementMap[t];if(n===void 0)throw"unknown internal format";return n}function te(e){let t=ye(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function it(e){return(e&e-1)===0}function lo(e,t,r,n){if(!ee(e))return it(t)&&it(r);let o=ye(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function co(e){let t=ye(e);if(!t)throw"unknown internal format";return t.textureFilterable}function uo(e,t,r){return J(t)?Ue(t):r||g}function ae(e,t,r,n,o){if(o%1!==0)throw"can't guess dimensions";if(!r&&!n){let i=Math.sqrt(o/(t===C?6:1));i%1===0?(r=i,n=i):(r=o,n=1)}else if(n){if(!r&&(r=o/n,r%1))throw"can't guess dimensions"}else if(n=o/r,n%1)throw"can't guess dimensions";return{width:r,height:n}}function q(e,t){t.colorspaceConversion!==void 0&&e.pixelStorei(Qr,t.colorspaceConversion),t.premultiplyAlpha!==void 0&&e.pixelStorei(en,t.premultiplyAlpha),t.flipY!==void 0&&e.pixelStorei(tn,t.flipY)}function Rt(e){e.pixelStorei(Be,4),ee(e)&&(e.pixelStorei(wt,0),e.pixelStorei(Pt,0),e.pixelStorei(Tt,0),e.pixelStorei(St,0),e.pixelStorei(It,0))}function fo(e,t,r,n){n.minMag&&(r.call(e,t,we,n.minMag),r.call(e,t,Pe,n.minMag)),n.min&&r.call(e,t,we,n.min),n.mag&&r.call(e,t,Pe,n.mag),n.wrap&&(r.call(e,t,ue,n.wrap),r.call(e,t,fe,n.wrap),(t===V||pr(e,t))&&r.call(e,t,tt,n.wrap)),n.wrapR&&r.call(e,t,tt,n.wrapR),n.wrapS&&r.call(e,t,ue,n.wrapS),n.wrapT&&r.call(e,t,fe,n.wrapT),n.minLod!==void 0&&r.call(e,t,Yr,n.minLod),n.maxLod!==void 0&&r.call(e,t,qr,n.maxLod),n.baseLevel!==void 0&&r.call(e,t,Xr,n.baseLevel),n.maxLevel!==void 0&&r.call(e,t,Kr,n.maxLevel),n.compareFunc!==void 0&&r.call(e,t,Jr,n.compareFunc),n.compareMode!==void 0&&r.call(e,t,Zr,n.compareMode)}function zt(e,t,r){let n=r.target||M;e.bindTexture(n,t),fo(e,n,e.texParameteri,r)}function mo(e){return e=e||k.textureColor,J(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function Te(e,t,r,n,o,i){r=r||k.textureOptions,i=i||v;let l=r.target||M;if(n=n||r.width,o=o||r.height,e.bindTexture(l,t),lo(e,n,o,i))e.generateMipmap(l);else{let a=co(i)?$r:Nr;e.texParameteri(l,we,a),e.texParameteri(l,Pe,a),e.texParameteri(l,ue,ce),e.texParameteri(l,fe,ce)}}function Q(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function Se(e,t){return t=t||{},t.cubeFaceOrder||[Me,Vr,jr,Hr,Wr,Gr]}function Ie(e,t){let r=Se(e,t).map(function(n,o){return{face:n,ndx:o}});return r.sort(function(n,o){return n.face-o.face}),r}function Ut(e,t,r,n){n=n||k.textureOptions;let o=n.target||M,i=n.level||0,l=r.width,a=r.height,s=n.internalFormat||n.format||v,c=te(s),f=n.format||c.format,u=n.type||c.type;if(q(e,n),e.bindTexture(o,t),o===C){let y=r.width,d=r.height,m,p;if(y/6===d)m=d,p=[0,0,1,0,2,0,3,0,4,0,5,0];else if(d/6===y)m=y,p=[0,0,0,1,0,2,0,3,0,4,0,5];else if(y/3===d/2)m=y/3,p=[0,0,1,0,2,0,0,1,1,1,2,1];else if(y/2===d/3)m=y/2,p=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);let h=Et();h?(h.canvas.width=m,h.canvas.height=m,l=m,a=m,Ie(e,n).forEach(function(x){let A=p[x.ndx*2+0]*m,T=p[x.ndx*2+1]*m;h.drawImage(r,A,T,m,m,0,0,m,m),e.texImage2D(x.face,i,s,f,u,h.canvas)}),h.canvas.width=1,h.canvas.height=1):typeof createImageBitmap<"u"&&(l=m,a=m,Ie(e,n).forEach(function(x){let A=p[x.ndx*2+0]*m,T=p[x.ndx*2+1]*m;e.texImage2D(x.face,i,s,m,m,0,f,u,null),createImageBitmap(r,A,T,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(z){q(e,n),e.bindTexture(o,t),e.texImage2D(x.face,i,s,f,u,z),Q(n)&&Te(e,t,n,l,a,s)})}))}else if(o===V||o===j){let y=Math.min(r.width,r.height),d=Math.max(r.width,r.height),m=d/y;if(m%1!==0)throw"can not compute 3D dimensions of element";let p=r.width===d?1:0,h=r.height===d?1:0;e.pixelStorei(Be,1),e.pixelStorei(wt,r.width),e.pixelStorei(Pt,0),e.pixelStorei(It,0),e.texImage3D(o,i,s,y,y,y,0,f,u,null);for(let x=0;x<m;++x){let A=x*y*p,T=x*y*h;e.pixelStorei(Tt,A),e.pixelStorei(St,T),e.texSubImage3D(o,i,0,0,x,y,y,1,f,u,r)}Rt(e)}else e.texImage2D(o,i,s,f,u,r);Q(n)&&Te(e,t,n,l,a,s),zt(e,t,n)}function X(){}function yo(e){if(typeof document<"u"){let t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}else{let t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}function bo(e,t){return t===void 0&&!yo(e)?"anonymous":t}function po(e,t,r){r=r||X;let n;if(t=t!==void 0?t:k.crossOrigin,t=bo(e,t),typeof Image<"u"){n=new Image,t!==void 0&&(n.crossOrigin=t);let o=function(){n.removeEventListener("error",i),n.removeEventListener("load",l),n=null},i=function(){let a="couldn't load image: "+e;bt(a),r(a,n),o()},l=function(){r(null,n),o()};return n.addEventListener("error",i),n.addEventListener("load",l),n.src=e,n}else if(typeof ImageBitmap<"u"){let o,i,l=function(){r(o,i)},a={};t&&(a.mode="cors"),fetch(e,a).then(function(s){if(!s.ok)throw s;return s.blob()}).then(function(s){return createImageBitmap(s,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(s){i=s,setTimeout(l)}).catch(function(s){o=s,setTimeout(l)}),n=null}return n}function Ct(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function De(e,t,r){return Ct(e)?(setTimeout(function(){r(null,e)}),e):po(e,t,r)}function Le(e,t,r){r=r||k.textureOptions;let n=r.target||M;if(e.bindTexture(n,t),r.color===!1)return;let o=mo(r.color);if(n===C)for(let i=0;i<6;++i)e.texImage2D(Me+i,0,v,1,1,0,v,g,o);else n===V||n===j?e.texImage3D(n,0,v,1,1,1,0,v,g,o):e.texImage2D(n,0,v,1,1,0,v,g,o)}function ho(e,t,r,n){return n=n||X,r=r||k.textureOptions,Le(e,t,r),r=Object.assign({},r),De(r.src,r.crossOrigin,function(o,i){o?n(o,t,i):(Ut(e,t,i,r),n(null,t,i))})}function xo(e,t,r,n){n=n||X;let o=r.src;if(o.length!==6)throw"there must be 6 urls for a cubemap";let i=r.level||0,l=r.internalFormat||r.format||v,a=te(l),s=r.format||a.format,c=r.type||g,f=r.target||M;if(f!==C)throw"target must be TEXTURE_CUBE_MAP";Le(e,t,r),r=Object.assign({},r);let u=6,y=[],d=Se(e,r),m;function p(h){return function(x,A){--u,x?y.push(x):A.width!==A.height?y.push("cubemap face img is not a square: "+A.src):(q(e,r),e.bindTexture(f,t),u===5?Se().forEach(function(T){e.texImage2D(T,i,l,s,c,A)}):e.texImage2D(h,i,l,s,c,A),Q(r)&&e.generateMipmap(f)),u===0&&n(y.length?y:void 0,t,m)}}m=o.map(function(h,x){return De(h,r.crossOrigin,p(d[x]))})}function go(e,t,r,n){n=n||X;let o=r.src,i=r.internalFormat||r.format||v,l=te(i),a=r.format||l.format,s=r.type||g,c=r.target||j;if(c!==V&&c!==j)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Le(e,t,r),r=Object.assign({},r);let f=o.length,u=[],y,d=r.level||0,m=r.width,p=r.height,h=o.length,x=!0;function A(T){return function(z,D){if(--f,z)u.push(z);else{if(q(e,r),e.bindTexture(c,t),x){x=!1,m=r.width||D.width,p=r.height||D.height,e.texImage3D(c,d,i,m,p,h,0,a,s,null);for(let L=0;L<h;++L)e.texSubImage3D(c,d,0,0,L,m,p,1,a,s,D)}else{let L=D,R;(D.width!==m||D.height!==p)&&(R=Et(),L=R.canvas,R.canvas.width=m,R.canvas.height=p,R.drawImage(D,0,0,m,p)),e.texSubImage3D(c,d,0,0,T,m,p,1,a,s,L),R&&L===R.canvas&&(R.canvas.width=0,R.canvas.height=0)}Q(r)&&e.generateMipmap(c)}f===0&&n(u.length?u:void 0,t,y)}}y=o.map(function(T,z){return De(T,r.crossOrigin,A(z))})}function vo(e,t,r,n){n=n||k.textureOptions;let o=n.target||M;e.bindTexture(o,t);let i=n.width,l=n.height,a=n.depth,s=n.level||0,c=n.internalFormat||n.format||v,f=te(c),u=n.format||f.format,y=n.type||uo(e,r,f.type);if(J(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{let h=yt(y);r=new h(r)}let d=so(c,y),m=r.byteLength/d;if(m%1)throw"length wrong size for format: "+At(e,u);let p;if(o===V||o===j)if(!i&&!l&&!a){let h=Math.cbrt(m);if(h%1!==0)throw"can't guess cube size of array of numElements: "+m;i=h,l=h,a=h}else i&&(!l||!a)?(p=ae(e,o,l,a,m/i),l=p.width,a=p.height):l&&(!i||!a)?(p=ae(e,o,i,a,m/l),i=p.width,a=p.height):(p=ae(e,o,i,l,m/a),i=p.width,l=p.height);else p=ae(e,o,i,l,m),i=p.width,l=p.height;if(Rt(e),e.pixelStorei(Be,n.unpackAlignment||1),q(e,n),o===C){let h=d/r.BYTES_PER_ELEMENT,x=m/6*h;Ie(e,n).forEach(A=>{let T=x*A.ndx,z=r.subarray(T,T+x);e.texImage2D(A.face,s,c,i,l,0,u,y,z)})}else o===V||o===j?e.texImage3D(o,s,c,i,l,a,0,u,y,r):e.texImage2D(o,s,c,i,l,0,u,y,r);return{width:i,height:l,depth:a,type:y}}function Fo(e,t,r){let n=r.target||M;e.bindTexture(n,t);let o=r.level||0,i=r.internalFormat||r.format||v,l=te(i),a=r.format||l.format,s=r.type||l.type;if(q(e,r),n===C)for(let c=0;c<6;++c)e.texImage2D(Me+c,o,i,r.width,r.height,0,a,s,null);else n===V||n===j?e.texImage3D(n,o,i,r.width,r.height,r.depth,0,a,s,null):e.texImage2D(n,o,i,r.width,r.height,0,a,s,null)}function Ao(e,t,r){r=r||X,t=t||k.textureOptions;let n=e.createTexture(),o=t.target||M,i=t.width||1,l=t.height||1,a=t.internalFormat||v;e.bindTexture(o,n),o===C&&(e.texParameteri(o,ue,ce),e.texParameteri(o,fe,ce));let s=t.src;if(s)if(typeof s=="function"&&(s=s(e,t)),typeof s=="string")ho(e,n,t,r);else if(J(s)||Array.isArray(s)&&(typeof s[0]=="number"||Array.isArray(s[0])||J(s[0]))){let c=vo(e,n,s,t);i=c.width,l=c.height}else Array.isArray(s)&&(typeof s[0]=="string"||Ct(s[0]))?o===C?xo(e,n,t,r):go(e,n,t,r):(Ut(e,n,s,t),i=s.width,l=s.height);else Fo(e,n,t);return Q(t)&&Te(e,n,t,i,l,a),zt(e,n,t),n}function Eo(e){return typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"}function wo(e,t,r){r=r||X;let n=0,o=[],i={},l={};function a(){n===0&&setTimeout(function(){r(o.length?o:void 0,i,l)},0)}return Object.keys(t).forEach(function(s){let c=t[s],f;Eo(c.src)&&(f=function(u,y,d){l[s]=d,--n,u&&o.push(u),a()},++n),i[s]=Ao(e,c,f)}),a(),i}function kt(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}function Zt(e,t){return b[t].bindPoint}function ii(e,t){return function(r){e.uniform1f(t,r)}}function ai(e,t){return function(r){e.uniform1fv(t,r)}}function si(e,t){return function(r){e.uniform2fv(t,r)}}function li(e,t){return function(r){e.uniform3fv(t,r)}}function ci(e,t){return function(r){e.uniform4fv(t,r)}}function Jt(e,t){return function(r){e.uniform1i(t,r)}}function Qt(e,t){return function(r){e.uniform1iv(t,r)}}function er(e,t){return function(r){e.uniform2iv(t,r)}}function tr(e,t){return function(r){e.uniform3iv(t,r)}}function rr(e,t){return function(r){e.uniform4iv(t,r)}}function ui(e,t){return function(r){e.uniform1ui(t,r)}}function fi(e,t){return function(r){e.uniform1uiv(t,r)}}function mi(e,t){return function(r){e.uniform2uiv(t,r)}}function yi(e,t){return function(r){e.uniform3uiv(t,r)}}function bi(e,t){return function(r){e.uniform4uiv(t,r)}}function di(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}function pi(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}function hi(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}function xi(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}function gi(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}function vi(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}function Fi(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}function Ai(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}function Ei(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}function w(e,t,r,n){let o=Zt(e,t);return ee(e)?function(i){let l,a;!i||dt(e,i)?(l=i,a=null):(l=i.texture,a=i.sampler),e.uniform1i(n,r),e.activeTexture(me+r),e.bindTexture(o,l),e.bindSampler(r,a)}:function(i){e.uniform1i(n,r),e.activeTexture(me+r),e.bindTexture(o,i)}}function P(e,t,r,n,o){let i=Zt(e,t),l=new Int32Array(o);for(let a=0;a<o;++a)l[a]=r+a;return ee(e)?function(a){e.uniform1iv(n,l),a.forEach(function(s,c){e.activeTexture(me+l[c]);let f,u;!s||dt(e,s)?(f=s,u=null):(f=s.texture,u=s.sampler),e.bindSampler(r,u),e.bindTexture(i,f)})}:function(a){e.uniform1iv(n,l),a.forEach(function(s,c){e.activeTexture(me+l[c]),e.bindTexture(i,s)})}}function ge(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(be,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||de,r.normalize||!1,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function B(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4iv(t,r.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(be,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||_e,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function ve(e,t){return function(r){if(r.value)if(e.disableVertexAttribArray(t),r.value.length===4)e.vertexAttrib4uiv(t,r.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(be,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||Ne,r.stride||0,r.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(t,r.divisor||0)}}function Ve(e,t,r){let n=r.size,o=r.count;return function(i){e.bindBuffer(be,i.buffer);let l=i.size||i.numComponents||n,a=l/o,s=i.type||de,c=b[s].size*l,f=i.normalize||!1,u=i.offset||0,y=c/o;for(let d=0;d<o;++d)e.enableVertexAttribArray(t+d),e.vertexAttribPointer(t+d,a,s,f,c,u+y*d),e.vertexAttribDivisor&&e.vertexAttribDivisor(t+d,i.divisor||0)}}function Pi(e,t="",r=0){let n=[...t.matchAll(wi)],o=new Map(n.map((i,l)=>{let a=parseInt(i[1]),s=n[l+1],c=s?s.index:t.length,f=t.substring(i.index,c);return[a-1,f]}));return e.split(`
`).map((i,l)=>{let a=o.get(l);return`${l+1+r}: ${i}${a?`

^^^ ${a}`:""}`}).join(`
`)}function nr(e){let t=0;return at.test(e)&&(t=1,e=e.replace(at,"")),{lineOffset:t,shaderSource:e}}function Ti(e,t){return e.errorCallback(t),e.callback&&setTimeout(()=>{e.callback(`${t}
${e.errors.join(`
`)}`)}),null}function Si(e,t,r,n){if(n=n||Oe,!e.getShaderParameter(r,To)){let o=e.getShaderInfoLog(r),{lineOffset:i,shaderSource:l}=nr(e.getShaderSource(r)),a=`${Pi(l,o,i)}
Error compiling ${At(e,t)}: ${o}`;return n(a),a}return""}function je(e,t,r){let n,o,i;if(typeof t=="function"&&(r=t,t=void 0),typeof e=="function")r=e,e=void 0;else if(e&&!Array.isArray(e)){let c=e;r=c.errorCallback,e=c.attribLocations,n=c.transformFeedbackVaryings,o=c.transformFeedbackMode,i=c.callback}let l=r||Oe,a=[],s={errorCallback(c,...f){a.push(c),l(c,...f)},transformFeedbackVaryings:n,transformFeedbackMode:o,callback:i,errors:a};{let c={};Array.isArray(e)?e.forEach(function(f,u){c[f]=t?t[u]:u}):c=e||{},s.attribLocations=c}return s}function Ri(e,t){if(t.indexOf("frag")>=0)return Io;if(t.indexOf("vert")>=0)return Ro}function zi(e,t,r){let n=e.getAttachedShaders(t);for(let o of n)r.has(o)&&e.deleteShader(o);e.deleteProgram(t)}function Ci(e,t,r){let n=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:i,transformFeedbackMode:l}=je(r);for(let a=0;a<t.length;++a){let s=t[a];if(typeof s=="string"){let c=kt(s),f=c?c.text:s,u=e[Ii[a]];c&&c.type&&(u=Ri(e,c.type)||u),s=e.createShader(u),e.shaderSource(s,nr(f).shaderSource),e.compileShader(s),e.attachShader(n,s)}}Object.entries(o).forEach(([a,s])=>e.bindAttribLocation(n,s,a));{let a=i;a&&(a.attribs&&(a=a.attribs),Array.isArray(a)||(a=Object.keys(a)),e.transformFeedbackVaryings(n,a,l||zo))}return e.linkProgram(n),n}function ki(e,t,r,n,o){let i=je(r,n,o),l=new Set(t),a=Ci(e,t,i);function s(c,f){let u=Bi(c,f,i.errorCallback);return u&&zi(c,f,l),u}if(i.callback){Mi(e,a).then(()=>{let c=s(e,a);i.callback(c,c?void 0:a)});return}return s(e,a)?void 0:a}function Mi(e,t){return O(this,null,function*(){let r=e.getExtension("KHR_parallel_shader_compile"),n=r?(i,l)=>i.getProgramParameter(l,r.COMPLETION_STATUS_KHR):()=>!0,o=0;do yield Ui(o),o=1e3/60;while(!n(e,t))})}function Bi(e,t,r){if(r=r||Oe,!e.getProgramParameter(t,So)){let n=e.getProgramInfoLog(t);r(`Error in program linking: ${n}`);let o=e.getAttachedShaders(t).map(i=>Si(e,e.getShaderParameter(i,e.SHADER_TYPE),i,r));return`${n}
${o.filter(i=>i).join(`
`)}`}}function Di(e,t,r,n,o){return ki(e,t,r,n,o)}function or(e){let t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function _i(e,t,r,n){let o=e.split(Li).filter(a=>a!==""),i=0,l="";for(;;){let a=o[i++];l+=a;let s=Oi(a[0]),c=s?parseInt(a):a;if(s&&(l+=o[i++]),i===o.length){r[c]=t;break}else{let f=o[i++],u=f==="[",y=r[c]||(u?[]:{});r[c]=y,r=y,n[l]=n[l]||function(d){return function(m){ir(d,m)}}(y),l+=f}}}function Ni(e,t){let r=0;function n(a,s,c){let f=s.name.endsWith("[0]"),u=s.type,y=b[u];if(!y)throw new Error(`unknown type: 0x${u.toString(16)}`);let d;if(y.bindPoint){let m=r;r+=s.size,f?d=y.arraySetter(e,u,m,c,s.size):d=y.setter(e,u,m,c,s.size)}else y.arraySetter&&f?d=y.arraySetter(e,c):d=y.setter(e,c);return d.location=c,d}let o={},i={},l=e.getProgramParameter(t,Mt);for(let a=0;a<l;++a){let s=e.getActiveUniform(t,a);if(or(s))continue;let c=s.name;c.endsWith("[0]")&&(c=c.substr(0,c.length-3));let f=e.getUniformLocation(t,s.name);if(f){let u=n(t,s,f);o[c]=u,_i(c,u,i,o)}}return o}function $i(e,t){let r={},n=e.getProgramParameter(t,Co);for(let o=0;o<n;++o){let i=e.getTransformFeedbackVarying(t,o);r[i.name]={index:o,type:i.type,size:i.size}}return r}function Vi(e,t){let r=e.getProgramParameter(t,Mt),n=[],o=[];for(let a=0;a<r;++a){o.push(a),n.push({});let s=e.getActiveUniform(t,a);n[a].name=s.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(a){let s=a[0],c=a[1];e.getActiveUniforms(t,o,e[s]).forEach(function(f,u){n[u][c]=f})});let i={},l=e.getProgramParameter(t,ko);for(let a=0;a<l;++a){let s=e.getActiveUniformBlockName(t,a),c={index:e.getUniformBlockIndex(t,s),usedByVertexShader:e.getActiveUniformBlockParameter(t,a,Mo),usedByFragmentShader:e.getActiveUniformBlockParameter(t,a,Bo),size:e.getActiveUniformBlockParameter(t,a,Do),uniformIndices:e.getActiveUniformBlockParameter(t,a,Lo)};c.used=c.usedByVertexShader||c.usedByFragmentShader,i[s]=c}return{blockSpecs:i,uniformData:n}}function ir(e,t){for(let r in t){let n=e[r];typeof n=="function"?n(t[r]):ir(e[r],t[r])}}function He(e,...t){let r=e.uniformSetters||e,n=t.length;for(let o=0;o<n;++o){let i=t[o];if(Array.isArray(i)){let l=i.length;for(let a=0;a<l;++a)He(r,i[a])}else for(let l in i){let a=r[l];a&&a(i[l])}}}function ji(e,t){let r={},n=e.getProgramParameter(t,Uo);for(let o=0;o<n;++o){let i=e.getActiveAttrib(t,o);if(or(i))continue;let l=e.getAttribLocation(t,i.name),a=F[i.type],s=a.setter(e,l,a);s.location=l,r[i.name]=s}return r}function Hi(e,t){for(let r in t){let n=e[r];n&&n(t[r])}}function Wi(e,t,r){r.vertexArrayObject?e.bindVertexArray(r.vertexArrayObject):(Hi(t.attribSetters||t,r.attribs),r.indices&&e.bindBuffer(Po,r.indices))}function st(e,t){let r=Ni(e,t),n=ji(e,t),o={program:t,uniformSetters:r,attribSetters:n};return ee(e)&&(o.uniformBlockSpec=Vi(e,t),o.transformFeedbackInfo=$i(e,t)),o}function Yi(e,t,r,n,o){let i=je(r,n,o),l=[];if(t=t.map(function(c){if(!Gi.test(c)){let f=kt(c);if(f)c=f.text;else{let u=`no element with id: ${c}`;i.errorCallback(u),l.push(u)}}return c}),l.length)return Ti(i,"");let a=i.callback;a&&(i.callback=(c,f)=>{a(c,c?void 0:st(e,f))});let s=Di(e,t,i);return s?st(e,s):null}function Xi(e,t,r,n,o,i){r=r===void 0?qi:r;let l=t.indices,a=t.elementType,s=n===void 0?t.numElements:n;o=o===void 0?0:o,a||l?i!==void 0?e.drawElementsInstanced(r,s,a===void 0?lt:t.elementType,o,i):e.drawElements(r,s,a===void 0?lt:t.elementType,o):i!==void 0?e.drawArraysInstanced(r,o,s,i):e.drawArrays(r,o,s)}var ut,qe,Xe,br,ft,le,Ke,pt,$,hr,xr,gr,vr,Fr,Ar,Er,wr,ht,xt,Ir,Rr,Fe,At,k,J,Et,Ze,I,v,Je,Qe,K,et,ce,Nr,$r,M,C,V,j,Me,Vr,jr,Hr,Wr,Gr,we,Pe,ue,fe,tt,Yr,qr,Xr,Kr,Zr,Jr,Be,wt,Pt,Tt,St,It,Qr,en,tn,rn,nn,on,an,sn,ln,cn,un,fn,mn,yn,bn,dn,pn,hn,xn,gn,vn,Fn,An,En,wn,Pn,Tn,Sn,In,Rn,zn,Un,Cn,kn,Mn,Bn,Dn,Ln,On,_n,Nn,$n,Vn,jn,Hn,Wn,Gn,Yn,qn,Xn,Kn,Zn,Jn,Qn,eo,to,ro,U,g,re,H,ne,_,E,rt,nt,ot,S,Z,Ae,no,oo,io,ao,oe,W,ie,G,Y,N,Ee,Oe,me,be,Po,To,So,Io,Ro,zo,Mt,Uo,Co,ko,Mo,Bo,Do,Lo,de,Bt,Dt,Lt,_e,Ot,_t,Nt,$t,Vt,jt,Ht,Wt,Gt,Yt,Oo,_o,No,$o,Vo,jo,Ho,Wo,Go,Yo,qo,Xo,Ko,Ne,qt,Xt,Kt,Zo,Jo,Qo,ei,ti,ri,ni,oi,pe,he,$e,xe,b,F,wi,at,Ii,Ui,Li,Oi,Gi,qi,lt,ct,Ki,Zi,Re,ar,se,ze,sr=mr(()=>{ut=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},qe=(e,t,r)=>(ut(e,t,"read from private field"),r?r.call(e):t.get(e)),Xe=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},br=(e,t,r)=>(ut(e,t,"access private method"),r);ft={};{let e=ft;e[5120]=Int8Array,e[5121]=Uint8Array,e[5122]=Int16Array,e[5123]=Uint16Array,e[5124]=Int32Array,e[5125]=Uint32Array,e[5126]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}le=typeof SharedArrayBuffer<"u"?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};Ke=new Map;pt=35044,$=34962,hr=34963,xr=34660,gr=5120,vr=5121,Fr=5122,Ar=5123,Er=5124,wr=5125,ht=5126,xt={attribPrefix:""};Ir=/coord|texture/i,Rr=/color|colour/i;Fe=["position","positions","a_position"];At=function(){let e={},t={};function r(n){let o=n.constructor.name;if(!e[o]){for(let i in n)if(typeof n[i]=="number"){let l=t[n[i]];t[n[i]]=l?`${l} | ${i}`:i}e[o]=!0}}return function(n,o){return r(n),t[o]||(typeof o=="number"?`0x${o.toString(16)}`:o)}}(),k={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},J=le,Et=function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}}(),Ze=6406,I=6407,v=6408,Je=6409,Qe=6410,K=6402,et=34041,ce=33071,Nr=9728,$r=9729,M=3553,C=34067,V=32879,j=35866,Me=34069,Vr=34070,jr=34071,Hr=34072,Wr=34073,Gr=34074,we=10241,Pe=10240,ue=10242,fe=10243,tt=32882,Yr=33082,qr=33083,Xr=33084,Kr=33085,Zr=34892,Jr=34893,Be=3317,wt=3314,Pt=32878,Tt=3316,St=3315,It=32877,Qr=37443,en=37441,tn=37440,rn=33321,nn=36756,on=33325,an=33326,sn=33330,ln=33329,cn=33338,un=33337,fn=33340,mn=33339,yn=33323,bn=36757,dn=33327,pn=33328,hn=33336,xn=33335,gn=33332,vn=33331,Fn=33334,An=33333,En=32849,wn=35905,Pn=36194,Tn=36758,Sn=35898,In=35901,Rn=34843,zn=34837,Un=36221,Cn=36239,kn=36215,Mn=36233,Bn=36209,Dn=36227,Ln=32856,On=35907,_n=36759,Nn=32855,$n=32854,Vn=32857,jn=34842,Hn=34836,Wn=36220,Gn=36238,Yn=36975,qn=36214,Xn=36232,Kn=36226,Zn=36208,Jn=33189,Qn=33190,eo=36012,to=36013,ro=35056,U=5120,g=5121,re=5122,H=5123,ne=5124,_=5125,E=5126,rt=32819,nt=32820,ot=33635,S=5131,Z=36193,Ae=33640,no=35899,oo=35902,io=36269,ao=34042,oe=33319,W=33320,ie=6403,G=36244,Y=36248,N=36249;Oe=bt;me=33984,be=34962,Po=34963,To=35713,So=35714,Io=35632,Ro=35633,zo=35981,Mt=35718,Uo=35721,Co=35971,ko=35382,Mo=35396,Bo=35398,Do=35392,Lo=35395,de=5126,Bt=35664,Dt=35665,Lt=35666,_e=5124,Ot=35667,_t=35668,Nt=35669,$t=35670,Vt=35671,jt=35672,Ht=35673,Wt=35674,Gt=35675,Yt=35676,Oo=35678,_o=35680,No=35679,$o=35682,Vo=35685,jo=35686,Ho=35687,Wo=35688,Go=35689,Yo=35690,qo=36289,Xo=36292,Ko=36293,Ne=5125,qt=36294,Xt=36295,Kt=36296,Zo=36298,Jo=36299,Qo=36300,ei=36303,ti=36306,ri=36307,ni=36308,oi=36311,pe=3553,he=34067,$e=32879,xe=35866,b={};b[de]={Type:Float32Array,size:4,setter:ii,arraySetter:ai};b[Bt]={Type:Float32Array,size:8,setter:si,cols:2};b[Dt]={Type:Float32Array,size:12,setter:li,cols:3};b[Lt]={Type:Float32Array,size:16,setter:ci,cols:4};b[_e]={Type:Int32Array,size:4,setter:Jt,arraySetter:Qt};b[Ot]={Type:Int32Array,size:8,setter:er,cols:2};b[_t]={Type:Int32Array,size:12,setter:tr,cols:3};b[Nt]={Type:Int32Array,size:16,setter:rr,cols:4};b[Ne]={Type:Uint32Array,size:4,setter:ui,arraySetter:fi};b[qt]={Type:Uint32Array,size:8,setter:mi,cols:2};b[Xt]={Type:Uint32Array,size:12,setter:yi,cols:3};b[Kt]={Type:Uint32Array,size:16,setter:bi,cols:4};b[$t]={Type:Uint32Array,size:4,setter:Jt,arraySetter:Qt};b[Vt]={Type:Uint32Array,size:8,setter:er,cols:2};b[jt]={Type:Uint32Array,size:12,setter:tr,cols:3};b[Ht]={Type:Uint32Array,size:16,setter:rr,cols:4};b[Wt]={Type:Float32Array,size:32,setter:di,rows:2,cols:2};b[Gt]={Type:Float32Array,size:48,setter:pi,rows:3,cols:3};b[Yt]={Type:Float32Array,size:64,setter:hi,rows:4,cols:4};b[Vo]={Type:Float32Array,size:32,setter:xi,rows:2,cols:3};b[jo]={Type:Float32Array,size:32,setter:vi,rows:2,cols:4};b[Ho]={Type:Float32Array,size:48,setter:gi,rows:3,cols:2};b[Wo]={Type:Float32Array,size:48,setter:Ai,rows:3,cols:4};b[Go]={Type:Float32Array,size:64,setter:Fi,rows:4,cols:2};b[Yo]={Type:Float32Array,size:64,setter:Ei,rows:4,cols:3};b[Oo]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:pe};b[_o]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:he};b[No]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:$e};b[$o]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:pe};b[qo]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:xe};b[Xo]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:xe};b[Ko]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:he};b[Zo]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:pe};b[Jo]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:$e};b[Qo]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:he};b[ei]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:xe};b[ti]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:pe};b[ri]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:$e};b[ni]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:he};b[oi]={Type:null,size:0,setter:w,arraySetter:P,bindPoint:xe};F={};F[de]={size:4,setter:ge};F[Bt]={size:8,setter:ge};F[Dt]={size:12,setter:ge};F[Lt]={size:16,setter:ge};F[_e]={size:4,setter:B};F[Ot]={size:8,setter:B};F[_t]={size:12,setter:B};F[Nt]={size:16,setter:B};F[Ne]={size:4,setter:ve};F[qt]={size:8,setter:ve};F[Xt]={size:12,setter:ve};F[Kt]={size:16,setter:ve};F[$t]={size:4,setter:B};F[Vt]={size:8,setter:B};F[jt]={size:12,setter:B};F[Ht]={size:16,setter:B};F[Wt]={size:4,setter:Ve,count:2};F[Gt]={size:9,setter:Ve,count:3};F[Yt]={size:16,setter:Ve,count:4};wi=/ERROR:\s*\d+:(\d+)/gi;at=/^[ \t]*\n/;Ii=["VERTEX_SHADER","FRAGMENT_SHADER"];Ui=(e=0)=>new Promise(t=>setTimeout(t,e));Li=/(\.|\[|]|\w+)/g,Oi=e=>e>="0"&&e<="9";Gi=/\s|{|}|;/;qi=4,lt=5123;ct=e=>O(void 0,null,function*(){return new Promise((t,r)=>{let n=new Image;n.src=e,n.onload=()=>t(n),n.onerror=()=>r(`Unable to load Image (src="${e}")`)})}),Ki=`
  precision lowp float;

  attribute vec2 position;
  varying   vec2 fragCoord;

  void main(void) {
    fragCoord   = (position * 0.5) + 0.5;
    gl_Position = vec4(position, 0.0, 1.0);
  }
`,Zi=`
  precision lowp float;

  uniform sampler2D characters;
  uniform sampler2D image;

  uniform float progress;
  uniform float smoothness;
  uniform vec2  characterSize;
  varying vec2  fragCoord;

  float PHI = 1.61803398874989484820459;  // golden ratio


  float random(vec2 xy, float seed){
    return clamp(
      fract(tan(distance(xy*PHI, xy)*seed) * distance(xy*PHI, xy)),
      0.0,
      1.0
    );
  }


  float randomBit(vec2 cellIdx) {
    return clamp(floor(random(cellIdx, 23.0) + 0.5), 0.0, 1.0);
  }


  float easeCell(vec2 idx) {
    return smoothstep(
      0.0,
      -smoothness,
      random(idx, 42.0) - (progress * (1.0 + smoothness))
    );
  }


  vec4 bitMask(vec2 cellIdx, vec2 gridCoord) {
    float bit = randomBit(cellIdx);

    vec2  cellCoord  = vec2(
      mod(gridCoord.x, 1.0),
      mod(gridCoord.y, 1.0)
    );

    vec2 charactersCoord = vec2(
      cellCoord.x * 0.5 + (0.5 * bit),
      cellCoord.y
    );

    return texture2D(characters, charactersCoord);
  }


  void main(void) {
    vec2 gridCoord  = (fragCoord - 1.5) * (1.0 / characterSize);
    vec2 cellIdx    = floor(gridCoord);

    vec4  img   = texture2D(image, fragCoord);
    float alpha = bitMask(cellIdx, gridCoord).r * easeCell(cellIdx);

    gl_FragColor = vec4(img.rgb, alpha);
  }
`,ze=class extends HTMLCanvasElement{constructor(){super(),Xe(this,Re),Xe(this,se,t=>{let{gl:r}=this,n=Math.max(0,t-this.startedAt),o=Math.min(n/this.duration,1);this.clear(),He(this.programInfo,{progress:o}),Xi(r,this.bufferInfo,r.TRIANGLE_STRIP),o<1&&(this.animationId=requestAnimationFrame(qe(this,se)))}),this.gl=this.getContext("webgl")}connectedCallback(){this.run()}run(){cancelAnimationFrame(this.animationId),setTimeout(()=>O(this,null,function*(){yield br(this,Re,ar).call(this),this.startedAt=performance.now(),this.animationId=requestAnimationFrame(qe(this,se))}),this.delay)}clear(){let{gl:t}=this;t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT)}};Re=new WeakSet,ar=function(){return O(this,null,function*(){var i,l;let{gl:e}=this;this.programInfo=Yi(e,[Ki,Zi]),this.bufferInfo=_r(e,{position:{numComponents:2,data:[1,1,-1,1,1,-1,-1,-1]}});let[t,r]=yield Promise.all([ct(this.imageSrc),ct(this.charactersSrc)]);(!this.hasAttribute("width")||!this.hasAttribute("height"))&&(this.width=t.naturalWidth,this.height=t.naturalHeight),e.useProgram(this.programInfo.program),e.viewport(0,0,this.width,this.height),e.clearColor(0,0,0,1),e.enable(e.BLEND),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);let n=(i=this.smoothness)!=null?i:.2,o=(l=this.characterScaling)!=null?l:1;Wi(e,this.programInfo,this.bufferInfo),He(this.programInfo,Ye({smoothness:n,characterSize:[r.width*o*.5/this.width,r.height*o/this.height]},wo(e,{image:{src:t,flipY:1},characters:{src:r,internalFormat:e.LUMIANCE}})))})},se=new WeakMap;customElements.define("binary-effect",ze,{extends:"canvas"})});var Ji=yr(lr=>{sr();document.addEventListener("DOMContentLoaded",()=>O(lr,null,function*(){yield new Promise(requestAnimationFrame),document.body.classList.add("document-ready")}),!1)});Ji();})();
/*! Bundled license information:

binary-effect/dist/binary-effect.js:
  (* @license twgl.js 5.5.4 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
  Available via the MIT license.
  see: http://github.com/greggman/twgl.js for details *)
*/
